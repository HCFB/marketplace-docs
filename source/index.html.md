---
title: Markeplace_HC

language_tabs: # must be one of https://git.io/vQNgJ
  - shell


toc_footers:

  - <a href='https://market.homecredit.ru'>Маркетлейс Home Credit</a>

includes:
  - errors

search: false
---

# Общие положения
Добро пожаловать на страницу интеграции с Маркетплейсом Хоум Кредит!

В документации детально описан процесс работы с клиентом от момента выбора товара и до момента взаиморасчета с партнером.

На странице содержатся требования к выгружаемому каталогу товаров и сервису API,который необходимо реализовать партнеру при осуществлении интеграции с Маркетплейсом.

<aside class="notice">
Доступ в Личный кабинет партнера (далее ЛК) предоставляется по согласованию с менеджером, реквизиты доступа высылаются на заявленный адрес электронной почты (e-mail).
</aside>

# Предоставление каталога 

Базовый сценарий предполагает, что на каждый регион необходимо задать свой каталог.

Возможен вариант когда каталог товаров един для всех регионов, данный сценарий необходимо предварительно согласовать с менеджером.

<aside class="warning">
Партнер предоставляет каталог товаров в формате XML.
</aside>

##Описание параметров выгрузки

Ниже описаны основные параметры для выгрузки каталога. Для успешной синхронизации каталога в нем должны присутствовать все обязательные параметры, а также соблюдаться структура выбранного формата.

Выгруженный каталог может содержать в себе любые другие параметры и элементы, например всю структуру YML (стандарт, разработанный Яндексом для принятия и размещения информации в базе данных Яндекс.Маркета), что не будет вызывать ошибок обработки каталога со стороны Маркетплейс.

##Каталог в формате XML
> Пример выгрузки:

```xml
<?xml version="1.0" encoding="windows-1251"?>
<yml_catalog date="2018-01-29 12:56">
    <shop>
        <name>Online Retail Company</name>
        <company>Online Retail Company</company>
        <url>https://online-retail-company.com</url>
        <categories>
            <category id="1">Ноутбуки</category>
            <category id="2" parentId="1">Планшеты</category>
            <category id="8" parentId="1">Смартфоны</category>
        </categories>
        <offers>
            <offer id="42" available="true" credit="list">
                <price>81999</price>
                <credits>
                    <credit program="0-0-24"/>
                    <credit program="0-0-12"/>
                    <credit program="0-0-3"/>
                </credits>
                <pickup>true</pickup>
                <delivery>true</delivery>
                <points>
                    <point id="2"/>
                    <point id="3"/>
                    <point id="5"/>
                    <point id="7"/>
                    <point id="9"/>
                </points>
                <delivery-options>
                    <option cost="338" days="2-3"/>
                    <option cost="979" days="3"/>
                    <option cost="488" days="5"/>
                </delivery-options>
                <categoryId>8</categoryId>
                <name>MacBook</name>
                <description>12-inch (diagonal) LED-backlit display with IPS technology</description>
            </offer>
            <offer id="262" available="true">
                <price>32499</price>
                <pickup>true</pickup>
                <delivery>false</delivery>
                <points>
                    <point id="2"/>
                    <point id="3"/>
                    <point id="4"/>
                    <point id="5"/>
                    <point id="6"/>
                    <point id="7"/>
                    <point id="8"/>
                    <point id="10"/>
                </points>
                <categoryId>2</categoryId>
                <name>Galaxy Tab S</name>
                <description>Элегантность контуров и современная функциональная мощь в сочетании с текстурой задней панели</description>
            </offer>
        </offers>
    </shop>
</yml_catalog>
```

Каталог обязательно должен иметь XML-заголовок, который начинается с первой строки, с нулевого элемента, в заголовке присутствуют атрибуты версии и используемая кодировка. Допустимые кодировки: UTF-8 или windows-1251. Пример заголовка:

За основу предложенной структуры XML-каталога использован формат выгрузки от [Яндекс.Маркет](https://yandex.ru/support/partnermarket/export/vendor-model.html), соответственно, если уже существует синхронизация с платформой Яндекс, достаточно внести незначительные дополнения, чтобы целевую выгрузку можно было задействовать для платформы Marketplace (минимально достаточно добавить атрибут credit в параметр offer, чтобы обозначить товары, которые планируется продавать в рассрочку).


| Элемент|Описание |
|-----------------------------|--------------------------------------------------------------------------------------|
| `yml_catalog`<br>Обязательный |  Корневой элемент, содержит в себе единственный параметр (является атрибутом для XML) date, который является обязательным и должен  соответствовать дате и времени генерации каталога, формат: “ YYYY-MM-DD hh:mm”, например "2017-02-06 17:19". Каталог может содержать только один корневой элемент. |

### Элементы yml_catalog
| Элемент| Описание |
|-------------------------|--------------------------------------------------------------------------------------|
| `shop`<br> Обязательный | Элемент содержит в себе описание партнерского магазина и его предложений. |


### Элементы shop
| Элемент| Описание |
|-------------------------|--------------------------------------------------------------------------------------|
| `name`<br> Обязательный |Короткое описание магазина партнера (не более 20 символов). |
| `company`<br> Обязательный | Полное наименование компании партнера (не публикуется на сайте). |
| `url`<br> Обязательный| URL главной страницы магазина партнера. |
| `categories`  <br> Обязательный| Состоит из списка элементов [category](#category), каждый из которых описывает категорию для товаров в каталоге. |
| `offers`<br> Обязательный|  Состоит из списка элементов [offer](#offer),  каждый из которых описывает товар в каталоге. |

###  Атрибуты category
| Атрибут| Описание |
|-------------------------|--------------------------------------------------------------------------------------|
| `id` <br> Обязательный | Идентификатор категорий. |
| `parentId`<br> Необязательный | Идентификатор подкатегории. |


###  Атрибуты offer

> Пример выгрузки:

```xml
<offer>
    <price>78999</price>
    <pickup>true</pickup>
    <delivery>true</delivery>
    <points>
        <point id="2"/>
        <point id="3"/>
        <point id="5"/>
        <point id="7"/>
        <point id="9"/>
    </points>
    <categoryId>8</categoryId>
    <model>MacBook</model>
    <description>12-inch (diagonal) LED-backlit display with IPS technology</description>
</offer>
``` 

| Атрибут| Описание |
|-------------------------|--------------------------------------------------------------------------------------|
| `id`<br> Обязательный | Идентификатор товарного предложения. |
| `available`<br> Обязательный| Признак наличия товара. Возможные значения:<ul><li>true — товар доступен для бронирования;</li><li>false — недоступен для бронирования (нет в наличии).</li></ul> |
| `credit`<br> Обязательный, если предложение доступно в рассрочку |Признак, что товар продается в рассрочку. Возможные значения:<ul><li>list — признак, что для данного товара существует ограниченный список программ рассрочек, которые будут описаны в параметре credits;</li><li>Отсутствие данного признака означает, что данный товар недоступен для продажи рассрочку.</li></ul>|
| `code`<br> Необязательный | Код кредитного продукта. Служит для идентификации срока рассрочки; партнерской скидки по кредитному продукту; сегмента или конкретного бренда, на который распространяется кредитный продукт. Пример: code="00ОЛ41Б24". Код кредитного продукта можно уточнить у менеджера ответственного за работу с Банком. |

### Элементы offer
| Элементы| Описание |
|-------------------------|--------------------------------------------------------------------------------------|
| `url`<br>  Необязательный | URL страницы товара на сайте партнера. |
| `price`<br> Обязательный | Цена товара на основе которой будет рассчитан ежемесячный платеж для рассрочки. |
| `credits`<br>Обязательный, если был заявлен атрибут credit со значением list | Включает список элементов программ рассрочек [credit](#credit), описывает доступные кредитные программы для каждого из товаров |
| `pickup`<br> Обязательный|  Обозначает доступность в пунктах самовывоза. Возможные значения:<ul><li>true — товар доступен в пунктах самовывоза. Дополнительно необходимо указать список пунктов самовывоза в параметре  points;</li><li>false — товар недоступен в пунктах самовывоза.</li></ul>  |
| `delivery` <br> Обязательный| Обозначает возможность доставки. Возможные значения:<ul><li>true — товар доступен для доставки;</li><li>false — доставка товара не предусмотрена.</li></ul>  |
| `points`<br>  Обязательный, если был заявлен элемент pickup со значением true | Состоит из элементов пунктов самовывоза и описывает доступные пункты самовывоза для получения данного предложения. |
| `delivery-options` <br> Необязательный| Параметр содержит список сроков и стоимости доставки для данного товара. Родительский элемент для [option](#option).|
| `categoryId` <br> Обязательный| Идентификатор категории товара для данного предложения|
| `name` <br> Обязательный| Название товара, не более 120 символов. Может содержать в себе название товара, производитель или бренд, модель, а также любые другие важные элементы.|
| `model` <br>  Необязательный| Наименование модели товара.|
| `vendor` <br>  Необязательный| Имя производителя или бренда для товара.|
| `description` <br>  Необязательный| Произвольное описание товара. Не более 3000 символов.|

###  Атрибуты credit
| Атрибут| Описание |
|-------------------------|--------------------------------------------------------------------------------------|
| `program`<br> Обязательный |Вариант рассрочки для данного предложения. Возможные значения:<ul><li>0-0-3</li><li>0-0-6</li><li>0-0-10</li><li>0-0-12</li><li>0-0-18</li><li>0-0-24</li><li>0-0-36.</li></ul> |
| `code`<br>  Необязательный | Код кредитного продукта. Служит для идентификации срока рассрочки; партнерской скидки по кредитному продукту; сегмента или конкретного бренда, на который распространяется кредитный продукт. Пример: code=“00ОЛ41Б24”. Код кредитного продукта можно уточнить у менеджера ответственного за работу с Банком. |

###  Атрибуты option
| Атрибут| Описание |
|-------------------------|--------------------------------------------------------------------------------------|
| `cost`<br> Обязательный | Стоимость доставки. |
| `days`<br> Необязательный | Срок доставки в рабочих днях. Возможен вариант указания периодов доставки, например “3-5” — от 3-х до 5 дней. Если указано пустое значение, либо атрибут не задан, считается, что срок доставки неопределен. |
| `order-before`<br>  Необязательный| Время оформления заказа, до наступления которого действуют указанные сроки и условия доставки. В атрибуте указывается локальное время (в часовом поясе магазина). В качестве значения можно использовать только целое число от 0 до 24. Например, время 14:00 описывается следующим образом:order-before="14". Если атрибут не указан, по-умолчанию используется значение 24 (полночь). |

Если товар есть не во всех точках самовывоза или существует техническое ограничение на перевозку товаров из одного пункта в другой, предусмотрен формат указания списка точек самовывоза для отдельно взятого товара, для этого необходимо использовать параметр points и перечислить в нем точки самовывоза:

Список точек самовывоза партнер загружает через Личный кабинет, данный процесс описан в разделе [Точки самовывоза](#44b7115d87)





##Процесс загрузки каталога

Подготовленный каталог необходимо указать в настройках аккаунта, которые задаются в Личном кабинете. Для каждого региона необходимо указать свой URL до целевого каталога. В случае, если партнер присутствует во всех регионах и имеет единый товарный каталог, необходимо выбрать “Все регионы” (необходимо предварительное согласование менеджера).

![](image_catalogue.jpeg)


#Точки самовывоза

Точки самовывоза передаются в виде CSV-таблицы с указанием адреса и режима работы. Необходимо использовать разделитель столбцов "," (запятая).

Загрузка и актуализация списка происходит через Личный кабинет. Если для какого-то регионов не указаны точки самовывоза, Покупателю будет предложен вариант доставки курьером.

При возможности разместить CSV на внешнем источнике, можно указать URL до целевого файла.
![](image_selfservice.jpeg)

##Описание параметров CSV с точками самовывоза
> Пример подготовленного CSV со списком точек самовывоза:

```markdown

Id,TradingPoint,RegionCode,RegionName,Address,workingDays,Saturday,Sunday
"1",737373,1,"Москва","ул. Сладкоежек, 17","09:00-21:00",,
"2",737374,2,"Санкт-Петербург","пр-д Кибернетиков, 64","07:30-15:00","false",
"3",737373,1,"Москва","ул. Трактористов, 11","10:00-20:00","10:00-16:00","false"
"4",737374,2,"Санкт-Петербург","б-р Цоя, 86","10:00-20:00",,
"5",737373,1,"Москва","просп. Мира, 16","09:30-18:15","false","false"
"6",737374,2,"Санкт-Петербург","ул. Малая, 1","09:00-21:00",,"false"
"7",737373,1,"Москва","наб. Левая, 18","11:11-22:22",,
"8",737374,2,"Санкт-Петербург","ул. Живая, 13","10:00-20:00","false",
"9",737373,1,"Москва","ул. Роз, 91","00:00-24:00",,
"10",737374,2,"Санкт-Петербург","ул. 3-х Озер, 12","09:00-21:00","false",
```

| Параметр                    | Описание                                                                                                                                                                            |
|-----------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `Id`<br> string             | Идентификатор точки самовывоза.                                                                                                                                                     |
| `TradingPoint`<br> integer  | Код торговой точки, соответствующий данному пункту самовывоза. Код кредитного продукта можно уточнить у менеджера, ответственного за работу с банком.                               |
| `RegionCode`<br> integer    | Идентификатор региона. Значение берется из списка регионов, в которых работает маркетплейс. Список регионов будет предоставлен со стороны Marketplace.                              |
| `RegionName`<br> string     | Название региона согласно списку. Значение берется из списка регионов, в которых работает маркетплейс. Список регионов будет предоставлен со стороны Marketplace.                   |
| `Address`<br> string        | Адрес точки самовывоза (произвольное описание).                                                                                                                                     |
| `workingDays`<br> string    | Режим работы в будние дни, формат XX:XX-XX:XX, например 11:00-20:00                                                                                                                 |
| `Saturday`<br> string       | Режим работы в субботу, формат XX:XX-XX:XX, например 11:00-20:00. Если поле остается пустым, берется значение из workingDays, если указано false —в субботу пункт не работает.      |
| `Sunday`<br>  string             | Режим работы в воскресенье, формат XX:XX-XX:XX, например 11:00-20:00. Если поле остается пустым, берется значение из Saturday, если указано false —в воскресенье пункт не работает. |
#Процесс покупки товара

##Покупка товара с доставкой курьером
Данный сценарий предполагает, что Покупатель подписывает договор без участия партнера, после чего инициируется процесс доставки.
![](image_delivery_curier.jpeg)
##Покупка товара с последующим самовывозом
Данный сценарий предполагает, что в точке самовывоза партнера присутствует кредитный специалист, который имеет доступ в систему Банка и полностью сопровождает процесс подписания договора с Покупателем.
![](image_delivery_self.jpeg)

#POST /order/check
**Проверка наличия товара у партнера.**<br>
В момент когда Покупатель выбрал предложение, партнеру поступает запрос на проверку наличия данного товара в регионе. В ответ партнер должен уведомить о возможности зарезервировать товар, а также прислать условия доставки и самовывоза. Расчет параметров получения товара клиентом должен производиться на основе доступных товаров. (Например, если доступно только 3 из 5 переданных в запросе товаров, стоимость доставки должна быть только для этих трех товаров).

## Входные параметры
`POST https://example.com/order/check`
> Пример запроса POST /order/check:

```shell
curl -X POST https://example.com/order/check \
  -H 'Content-Type: application/json' \
  -H 'cache-control: no-cache' \
  -d '{"offersRequest":[
{"offerId":"123",
"quantity":1,
"regionId":77,
"productCode":"0-0-6"}
]}'
```

| Параметр                                     | Обязательность | Описание                                                                           |
|----------------------------------------------|----------------|------------------------------------------------------------------------------------|
| `offersRequest`<br>  Array of [{offerRequest}](#offerrequest) | Обязательно    | Массив объектов с запросами на проверку наличия товаров, которые выбрал Покупатель. |

### объект offerRequest

| Параметр                  | Обязательность | Описание                                                                                                             |
|---------------------------|----------------|----------------------------------------------------------------------------------------------------------------------|
| `offerId` <br> integer    | Обязательно    | Идентификатор товара из YML-каталога.                                                                                |
| `quantity`<br>integer     | Обязательно    | Количество единиц товара для бронирования.                                                                           |
| `regionId` <br>integer    | Обязательно    | Идентификатор региона                                                                                                |
| `productCode`<br> string | Обязательно    | Код кредитного продукта.<br> Примеры:<ul><li>0-0-3</li><li>0-0-6</li><li>0-0-10</li><li>0-0-12</li><li>0-0-18</li><li>0-0-24</li><li>0-0-36</li></ul> |
| `orderId`<br> string      | Необязательно  | Идентификатор заказа, сгенерированный на стороне маркетплейса |

## Параметры ответа
`HTTP status code 200 OK — Список товаров с указанием наличия и условий.`
> Пример ответа в JSON:

```json
{
    "offersResponse": [
        {
            "status": "available",
            "offerId": "123",
            "quantity": 1,
            "points": [
                "0"
            ]
        }
    ],
    "DeliveryOptions": {
        "delivery": [
            {
                "DeliveryID": 1,
                "DeliveryName": "Доставка СДЭК(склад-склад)",
                "Cost": 1000,
                "Days": "1-2"
            }
        ]
    }
}
```

| Параметр | Обязательность | Описание |
|-------------------------------------------|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| offersResponse Array of [{offerResponse}](#offerresponse)| Обязательно | Массив объектов со статусом резерва по каждому из запрошенных товаров. |
| DeliveryOptions [{DeliveryOption}](#deliveryoption)| Обязательно | Дополнительная информация по параметрам доставки, которую сможет выбирать Покупатель. Партнер должен представить варианты доставки для всей группы товаров. |

### объект offerResponse
| Параметр | Обязательность | Описание |
|------------------------------|----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `offerId`<br>integer | Обязательно | Идентификатор товара из YML-каталога. |
| `status`<br>string | Обязательно | Варианты:<ul><li>‘available’ — товар доступен;</li><li>‘unavailable’ — товар недоступен.</li></ul> |
| `points`<br> Array of string | Обязательно | Идентификаторы пунктов самовывоза, в которых доступен товар.<br>Также необходимо добавлять в список 0, если доступна доставка курьером. Пустой массив - товар недоступен. |
| `reason`<br>string | Необязательно | Указывается, если товар недоступен (пример: “not in stock”). |

### объект DeliveryOption
| Параметр | Обязательность | Описание  |
|---------------------------------|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `delivery`<br> Array of Objects | Необязательно | Список вариантов доставки с указанием параметров: <ul><li>deliveryId—идентификатор службы доставки в системе партнера (будет передано при резервировании заказа);</li> <li>deliveryName— название службы доставки (будет отображено Покупателю);</li> <li>cost— стоимость доставки (если параметр отсутствует, то стоимость необходимо уточнять у службы доставки);</li><li> days— время доставки в днях (возможно указать интервал, например “5-7” интерпретируется как “доставка от 5 до 7 дней”).</li></ul>|
| `pickup`<br> Array of Objects | Необязательно | Список точек самовывоза доступные для заказа с указанием параметров:<ul><li> point — идентификатор точки самовывоза из CSV;</li> <li>cost— стоимость за услугу самовывоза, можно указать 0 или не указывать данные параметр если самовывоз бесплатный;</li> <li>days — время доставки товара на точку самовывоза, после которой товар можно забрать, 0 - если можно забрать в тот же день (возможно указать интервал, например “5-7” интерпретируется как “доставка от 5 до 7 дней”).</li></ul> |

## Обработка ошибок
> Пример ответа в JSON:

```json
{"errorFields":[
    {"price": "price is required"},
    {"offerId": "not found"}]
}
```
| Код HTTP | Описание |
|----------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 5xx | Внутренняя ошибка сервера партнера. |
| 422 | Неверный формат запроса (указаны неверные или не указаны обязательные параметры запроса). В теле запроса необходимо передавать поля, которые переданы с ошибкой и указывать в чем она заключается.  Формулировка ошибки может быть произвольной строкой (см. пример). |




#POST /order/:orderId/reserve
**Резервирование товара у партнера**<br>
<aside class="notice">
Базовый сценарий предполагает 2 этапа резервирования:
</aside>

**Предрезервирование** — или, так называемое, "краткосрочное" резервирование — Покупатель выбрал товар и приступил к заполнению формы, партнер на вызов данного метода бронирует товар для заданного orderId, который будет использоваться при втором этапе резервирования, метод которого будет вызвано следом. партнер сам определяет время короткого резерва, но значение должно быть не меньше 30 минут

**Резервирование** — после того, как Покупатель заполнил заявку, выбрал способ доставки, партнеру приходит запрос на резервирование товара до момента подписания кредитного договора клиентом.

## Входные параметры
`POST https://example.com/order/:orderId/prereserve`<br>
`POST https://example.com/order/:orderId/reserve`

> Пример запроса POST /order/:orderId/reserve:

```shell
curl -X POST https://example.com/order18022500002104/reserve \
  -H 'Content-Type: application/json' \
  -H 'cache-control: no-cache' \
  -d '{
  "orderId": "18022500002104", 
  "offerIds": [
    {
      "offer": 777, 
      "quantity": 1, 
      "price": 4000.0,
      "priceTotal": 5000.0
    }
    ], 
  "regionId": 77, 
  "pointId": "0",
  "productCode": "0-0-3",
  "client": { "firstName": "Иван", "lastName": "Иванов", "phone": "1244567", "email":"test@test.ru" },
  "address": {"country": "Россия", "region": "Москва", "district": "", "town": "Москва", "locality": "", "street": "Обводного канала", "house": "199", "flat": "", "block": "", "building": "", "zipcode": "190020"}
}'
```

| Параметр | Обязательность | Описание |
|---------------------------------|----------------|--------------------------------------------------------------------------------------|
| `orderId`<br>  string | Обязательно | Идентификатор заказа, сгенерированный на стороне маркетплейса. |
| `offerIds`<br> Array of [{offer}](#offer-3)| Обязательно | Массив объектов с идентификаторами товаров и их количество. |
| `regionId`<br> integer | Обязательно | Идентификатор региона из списка. |
| `pointId`<br>string | Обязательно | Идентификатор точки самовывоза из CSV, 0 - если выбрана доставка курьером. |
| `deliveryId`<br>integer  | Необязательно | Идентификатор службы доставки в системе партнера. |
| `productCode`<br>string  | Обязательно | Код кредитного продукта.<br> Примеры:<ul><li>0-0-3</li><li>0-0-6</li><li>0-0-10</li><li>0-0-12</li><li>0-0-18</li><li>0-0-24</li><li>0-0-36</li></ul> |
| `address`<br> [{address}](#address)| Необязательно | Адрес в формате КЛАДР, указывается, если выбрана доставка курьером. |
| `client`<br> [{clientInfo}](#clientInfo)| Обязательно(для метода reserve) | Информация о клиенте. |
                           
### объект offer
| Параметр | Обязательность | Описание |
|------------------------|----------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `offerId`<br> integer | Обязательно | Идентификатор товара из YML-каталога. |
| `quantity`<br> integer | Обязательно | Количество единиц товара. |
| `price`<br> float | Обязательно | Цена товара с учетом скидки, предоставляемой партнером. Размер скидки зависит от используемого кредитного продукта (срока рассрочки) и согласован с партнером. |
| `priceTotal`<br> float | Обязательно | Цена товара без учета скидки, то есть стоимость товара, которую партнер заявил в своем каталоге. |
 
### объект address
| Параметр | Обязательность | Описание |
|-----------------------|----------------|----------------------|
| `country`<br>  string | Обязательно | Код страны по КЛАДР. |
| `region`<br> string | Обязательно | Регион. |
| `district`<br>string | Обязательно | Район. |
| `town`<br>string | Обязательно | Город. |
| `locality`<br>string | Обязательно | Населенный пункт. |
| `street` <br>string | Обязательно | Улица. |
| `house`<br> string | Обязательно | Дом. |
| `flat` <br>string | Необязательно | Квартира. |
| `block` <br>string | Необязательно | Корпус. |
| `building` <br>string | Необязательно | Строение. |
| `zipcode` <br>string | Обязательно | Индекс. |

### объект clientInfo
| Параметр | Обязательность | Описание |
|------------------------|----------------|---------------------------------------------------|
| `firstName`<br>string | Обязательно | Имя клиента. |
| `lastName`<br>string | Обязательно | Фамилия клиента. |
| `middleName`<br>string | Необязательно | Отчество клиента. |
| `email`<br>string | Необязательно | E-mail. |
| `phone`<br>string | Обязательно | Телефон клиента. Номер должен быть ровно 10 цифр. |

## Параметры ответа
`HTTP status code 200 OK — Товар предрезервирован(ответ на метод prereserve).`
> Пример ответа в JSON:

```json
{
"status": "prereserved",
"PartnerOrderId": "12345",
"orderId": "18022600000999",
"reserveDuring": 30
}
```

| Параметр | Обязательность | Описание |
|-----------------------------|----------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `status`<br> string | Обязательно | значение: "prereserved" |
| `reserveDuring` <br>integer | Необязательно | Время в минутах для которого действует предрезервирование (короткий резерв). Если значение не указано, либо оно меньше 30, то будет взято значение по-умолчанию — 30 минут. |
| `partnerOrderId` <br>string | Необязательно | Идентификатор заказа, сгенерированный на стороне партнера. |
             
  
`HTTP status code 200 OK — Товар зарезервирован(ответ на метод reserve).`

| Параметр | Обязательность | Описание |
|-----------------------------|----------------|------------------------------------------------------------|
| `status`<br> string | Обязательно | значение: "prereserved" |
| `partnerOrderId` <br>string | Необязательно | Идентификатор заказа, сгенерированный на стороне партнера. |


`HTTP status code 200 OK — Товар недоступен для резервирования.`

| Параметр | Обязательность | Описание |
|-----------------------------|----------------|------------------------------------------------------------------------------|
| `status`<br> string | Обязательно | значение: 'cancelled'. |
| `reason` <br>string | Обязательно | Причина отказа в резервировании (Пример: 'address is not in delivery area'). |
| `partnerOrderId` <br>string | Необязательно | Идентификатор заказа, сгенерированный на стороне партнера. |

## Обработка ошибок 
 > Пример ответа в JSON:
 
```json
{"errorFields":[
      {"clientInfo": 
        {
        "phone": "phone is required"
        }
      }
  ]
}
```

| Параметр | Описание |
|----------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `5xx`  | Внутренняя ошибка сервера партнера. |
| `422` | Неверный формат запроса (указаны неверные или не указаны обязательные параметры запроса).<br> В теле запроса необходимо передавать поля, которые переданы с ошибкой и указывать в чем она заключается. Формулировка ошибки может быть произвольной строкой (см. пример). |
| `404` | Заказ не существует или указан неверный идентификатор. |

#POST /order/:orderId/status
**Передача статуса кредитной заявки партнера**

Данным методом Маркетплейс передает партнеру статус заявки в случае подписания(signed), что для партнера служит сигналом для доставки заказа клиенту или на пункт самовывоза. Либо отменяет заказ.

<aside class="notice">
Возможные сценарии:
</aside>

| Статус | Описание | Действия партнера |
|-------------------------------|----------------------------------------------------------------------|----------------------------------------------------------------------------------|
| Кредит отменен<br>(CANCELLED) | Отказ клиента. Также можно интерпретировать как отмена бронирования. | Партнер отменяет заказ. |
| Кредит подписан<br>(SIGNED) | Покупатель подписал кредитный договор и ожидает получение товара. | Партнер может выдать товар на пункте самовывоза, либо начинает процесс доставки. |


## Входные параметры
`POST https://example.com/order/:orderId/status`

> Пример запроса POST /order/:orderId/status:

```shell
curl -X POST \
  https://example.com/order/1234567890/status/ \
  -H 'Content-Type: application/json' \
  -H 'cache-control: no-cache' \
  -d '{
    "orderId":"1234567890",
    "PartnerOrderId":"777",
    "status":"SIGNED"
  }'
```
| Параметр | Обязательность | Описание |
|----------------------------|----------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `orderId`<br>string | Обязательно | Идентификатор заказа, сгенерированный на стороне Маркетплейс. |
| `PartnerOrderId`<br>string | Необязательно | Идентификатор заказа, сгенерированный на стороне партнера. Обязательный параметр, если партнер вернул этот параметр (номера заказа) на этапе резервирования. |
| `status`<br>string | Обязательно | Статус кредитной заявки (передается в качестве url-параметра).<br> Возможные варианты:<br><ul><li> CANCELLED - Кредит отменен.</li> <li>Отказ клиента.SIGNED - Кредит подписан.</li></ul> |

## Параметры ответа
`HTTP status code 200 OK —  Товар принят в обработку.`

> Примеры ответов в JSON:

```json
{
  "PartnerOrderId": "12345",
  "status": "reserved"
 
}
```

| Параметр | Обязательность | Описание |
|-----------------------------|----------------|------------------------------------------------------------|
| `partnerOrderId` <br>string | Необязательно | Идентификатор заказа, сгенерированный на стороне партнера. |
| `status`<br> string | Обязательно | Значение: 'reserved' |



`HTTP status code 200 OK — Товар доставляется.`

```json
{
  "PartnerOrderId": "12345",
  "status": "delivering"
  
}
```

| Параметр | Обязательность | Описание |
|-----------------------------|----------------|------------------------------------------------------------|
| `partnerOrderId` <br>string | Необязательно | Идентификатор заказа, сгенерированный на стороне партнера. |
| `status`<br> string | Обязательно | Значение: 'delivering'. |

`HTTP status code 200 OK — Товар не будет доставлен(Отмена заказа).`

```json
{
  "PartnerOrderId": "12345",
  "status": "cancelled",
  "reason": "address is not in delivery area"
}
```

| Параметр | Обязательность | Описание |
|-----------------------------|----------------|-------------------------------------------------------------|
| `partnerOrderId` <br>string | Необязательно | Идентификатор заказа, сгенерированный на стороне партнера. |
| `status`<br> string | Обязательно | Значение: 'reserved' |
| `reason` <br> string | Обязательно | Причина отказа (Пример: 'address is not in delivery area'). |

## Обработка ошибок 
 > Пример ответа в JSON:
 
```json
{"errorFields":[
    {
      "status": "not valid status"
    } 
  ]
}
```

| Параметр | Обязательность | Описание |
|-----------------------------|----------------|-------------------------------------------------------------|
| `partnerOrderId` <br>string | Необязательно | Идентификатор заказа, сгенерированный на стороне партнера. |
| `status`<br> string | Обязательно | Значение: 'reserved' |
| `reason` <br> string | Обязательно | Причина отказа (Пример: 'address is not in delivery area'). |

#GET /order/:orderId
**Проверка статуса заказа**
> Пример запроса GET /order/:orderId:

```shell
curl -X GET \
  https://example.com/order/1234567890 \
  -H 'cache-control: no-cache' \

```

`GET https://example.com/order/:orderId`

## Логика ответа
<aside class="notice">
Возможные сценарии:
</aside>

| Статус | Описания | Действия MarketPlace |
|--------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| Короткий резерв(prereserved) | Партнер подтвердил, что выбранный товар зарезервирован в режиме Короткий резерв до момента одобрения рассрочки для Покупателя | Покупатель заполняет заявку на рассрочку и ожидает её одобрение. MarketPlace вызывает метод Резервирования (reserve), либо отменяет Короткий Резерв, если одобрение не было получено, либо Покупатель отказался от заполнения формы. |
| Товар зарезервирован (reserved) | Партнер подтвердил, что выбранный товар зарезервирован до момента подписания Покупателем Кредитного договора | MarketPlace отправляет договор на подписание (в случае курьерской доставки), либо готовит печатные формы договора (в случае подписания на торговой точке партнера). |
| Товар находится в процессе доставки (delivering) | Партнер сообщает, что товар находится в процессе доставки Покупателю. | MarketPlace ожидает получение финального статуса. |
| Товар доставлен (delivered) | Партнер сообщает, что товар доставлен/выдан Покупателю. | MarketPlace начинает процедуру взаиморасчета с партнером. |
| Заказ отклонен (cancelled) | Партнер сообщает, что заказ отклонен. Дополнительно указывает причину отказа в поле reason. | MarketPlace отклоняет заказ внутри своей базы данных, информирует Покупателя об отмене. |

## Параметры ответа

`HTTP status code 200 OK — Товар  доступен для резервирования в течении 30 минут.`

 > Пример ответа в JSON:
 
```json
{  
  "orderId": "18022600000999",
  "status": "prereserved",
  "PartnerOrderId": "12345"
}
```

| Параметр | Обязательность | Описание |
|-----------------------------|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `orderId`<br> string | Необязательно  | Идентификатор заказа, сгенерированный на стороне Маркетплейс.|
| `status`<br> string | Обязательно | Значение: ‘prereserved’ |
| `partnerOrderId`<br> string | Необязательно  | Идентификатор заказа, сгенерированный на стороне партнера. Обязательный параметр, если партнер вернул этот параметр (номера заказа) на этапе резервирования |
| `points`<br>  Array of integer | Необязательно | Идентификаторы пунктов самовывоза из CSV-файла, в которых доступен товар. Также необходимо добавлять в список 0, если доступна доставка курьером. |

`HTTP status code 200 OK — Товар зарезервирован.`
 
```json
{
  "orderId": "18022600000999",
  "status": "reserved",
  "PartnerOrderId": "12345"
}
```

| Параметр | Обязательность | Описание |
|-----------------------------|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `orderId`<br> string | Необязательно  | Идентификатор заказа, сгенерированный на стороне Маркетплейс.| 
| `status`<br> string | Обязательно | Значение: 'reserved' |
| `partnerOrderId`<br> string | Необязательно  | Идентификатор заказа, сгенерированный на стороне партнера. Обязательный параметр, если партнер вернул этот параметр (номера заказа) на этапе резервирования |

`HTTP status code 200 OK — Товар доставляется.`
 
```json
{
"orderId": "18022600000999",
"status": "delivering",
"PartnerOrderId": "12345"
}
```
| Параметр | Обязательность | Описание |
|-----------------------------|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `orderId`<br> string | Необязательно  | Идентификатор заказа, сгенерированный на стороне Маркетплейс.| 
| `status`<br> string | Обязательно | Значение: 'delivering' |
| `partnerOrderId`<br> string | Необязательно  | Идентификатор заказа, сгенерированный на стороне партнера. Обязательный параметр, если партнер вернул этот параметр (номера заказа) на этапе резервирования |
| `trackId`<br> string | Необязательно | Id для трэкинга заказа, доставляемого транспортной компанией |

`HTTP status code 200 OK — Заказ доставлен.`
 
```json
{
  "orderId": "18022600000999",
  "status": "delivered",
  "PartnerOrderId": "12345"
}
```
| Параметр | Обязательность | Описание |
|-----------------------------|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `orderId`<br> string | Необязательно  | Идентификатор заказа, сгенерированный на стороне Маркетплейс.| 
| `status`<br> string | Обязательно | Значение: 'delivered' |
| `partnerOrderId`<br> string | Необязательно  | Идентификатор заказа, сгенерированный на стороне партнера. Обязательный параметр, если партнер вернул этот параметр (номера заказа) на этапе резервирования |

`HTTP status code 200 OK — Заказ отклонен.`

```json
{
  "orderId": "18022600000999",
  "status": "cancelled",
  "reason": "not in stock",
  "PartnerOrderId": "12345"
}
```

| Параметр | Обязательность | Описание |
|-----------------------------|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `orderId`<br> string | Необязательно  | Идентификатор заказа, сгенерированный на стороне Маркетплейс.| 
| `status`<br> string | Обязательно | Значение: 'cancelled' |
| `partnerOrderId`<br> string | Необязательно  | Идентификатор заказа, сгенерированный на стороне партнера. Обязательный параметр, если партнер вернул этот параметр (номера заказа) на этапе резервирования |
| `reason` <br> string | Обязательно | причина отказа (Пример: 'not in stock') |

## Обработка ошибок 
 > Пример ответа в JSON:
 
```json
{"errorFields":[
    {
      "status": "not valid Id"
    } 
  ]
}
```

| Код HTTP | Описание |
|----------|--------------------------------------------------------|
| 5xx | Внутренняя ошибка сервера партнера. |
| 404 | Заказ не существует или указан неверный идентификатор. |

<aside class="warning">
В случае возникновения ошибки 5хх произойдет повторный запрос через 60 секунд, если ошибка повторится, партнеру перестанут поступать новые заказы. После пяти попыток с интервалом в минуту партнеру будет направлено email-уведомление о неполадках на его стороне, после чего партнер будет отключен от системы до тех пор, пока не сообщит о том, что работоспособность восстановлена.
</aside>

#POST /offers/
**Обновление предложения партнера**

В случае изменения товарной позиции, партнеру необходимо отправить запрос к Маркетплейсу на обновление информации о предложении.

## Входные параметры
`POST https:/market.homecredit.ru/offers/


> Пример запроса POST /order/:orderId/reserve:

```shell
curl -X POST https:/market.homecredit.ru/offers/ \
  -H 'Content-Type: application/json' \
  -H 'cache-control: no-cache' \
  -d '{

}'
```

| Параметр | Обязательность | Описание |
|---------------------------------|----------------|--------------------------------------------------------------------------------------|
| `offers`<br>  Array of [{offer}](#offer-2) | Обязательно | Массив предложений, в которых произошли изменения. |

### объект offer
| Параметр | Обязательность | Описание |
|---------------------------------|----------------|--------------------------------------------------------------------------------------|
| `offerId`<br>  integer | Обязательно | Идентификатор товара из YML-каталога. |
| `regionIds`<br> Array of integer | Обязательно | Список идентификаторов регионов системы Маркетплейс, в которых произошли изменения. |
| `credit`<br>  Array of string | Необязательно | Список актуальных для предложения кредитных программ в формате [“0-0-6”,”0-0-10”]. |
| `product_code`<br>  string | Обязательно | Актуальный кредитный продукт для конкретного предложение (пустая строка, если для предложения больше нет отдельного кредитного продукта). |
| `price`<br>   float |   Необязательно | Актуальная цена для предложения. |
| `available`<br>   boolean | Небязательно | Доступность/недоступность товара у партнера. |
| `url`<br>   string |   Необязательно | Адрес страницы с товаром на сайте партнера. |
| `pickup`<br>   boolean |   Необязательно | Возможность доставки товара. Возможные значения:<ul><li>true — доставка товара возможна</li><li>false — доставка товара не предусмотрена.</li> <ul>|
| `delivery`<br>   boolean |   Необязательно | Возможность доставки товара. Возможные значения:<ul><li>true — доставка товара возможна;</li><li>false — доставка товара не предусмотрена.</li></ul> |
| `points`<br>   point |   Необязательно | Список пунктов самовывоза, описывает доступные пункты самовывоза для получения данного предложения. |
| `DeliveryOptions`<br>   [{option}](#option) |   Необязательно | Актуальная цена для предложения. |

### объект option
| Параметр | Обязательность | Описание |
|---------------------------------|----------------|--------------------------------------------------------------------------------------|
| `cost`<br> integer |   Обязательно | Стоимость доставки. |
| `days`<br>   string |   Необязательно | Срок доставки в рабочих днях. Возможен вариант указания периодов доставки, например “3-5” — от 3-х до 5 дней.<br> Если указано пустое значение, либо атрибут не задан, считается, что срок доставки не определен. В XML-каталоге является атрибутом для параметра option.. |
| `order-before`<br> integer | Необязательно | Время оформления заказа, до наступления которого действуют указанные сроки и условия доставки. В атрибуте указывается локальное время (в часовом поясе магазина). В качестве значения можно использовать только целое число от 0 до 24. Например, время 14:00 описывается следующим образом: order-before="14". Если атрибут не указан, по-умолчанию используется значение 24 (полночь). |

## Обработка ошибок 

| Код HTTP | Описание |
|----------|--------------------------------------------------------|
| 5xx | Внутренняя ошибка сервера Маркетплейс. |
| 422 | Неверный формат запроса (указаны неверные или не указаны обязательные параметры запроса). |

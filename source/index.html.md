---
title: Markeplace_HC

language_tabs: # must be one of https://git.io/vQNgJ
  - shell


toc_footers:

  - <a href='https://market.homecredit.ru'>Маркетлейс "Товары в рассрочку"</a>

includes:
  - errors

search: true
---

# Общие положения
Добро пожаловать на страницу интеграции с Маркетплейсом Хоум Кредит!

В документации детально описан процесс работы с клиентом от момента выбора товара и до момента взаиморасчета с партнером.

На странице содержатся требования к выгружаемому каталогу товаров и сервису API,который необходимо реализовать партнеру при осуществлении интеграции с Маркетплейсом.

<aside class="notice">
Доступ в Личный кабинет партнера (далее ЛК) предоставляется по согласованию с менеджером, реквизиты доступа высылаются на заявленный адрес электронной почты (e-mail).
</aside>

# Предоставление каталога 

<aside class="warning">
Партнер предоставляет каталог товаров в формате XML.
</aside>

<aside class="notice">
Базовый сценарий предполагает, что на каждый регион необходимо задать свой каталог. Возможен вариант когда каталог товаров един для всех регионов, данный сценарий необходимо предварительно согласовать с менеджером.
</aside>


##Описание параметров выгрузки

Ниже описаны основные параметры для выгрузки каталога. Для успешной синхронизации каталога в нем должны присутствовать все обязательные параметры, а также соблюдаться структура выбранного формата.

Выгруженный каталог может содержать в себе любые другие параметры и элементы, например всю структуру YML (стандарт, разработанный Яндексом для принятия и размещения информации в базе данных Яндекс.Маркета), что не будет вызывать ошибок обработки каталога со стороны Маркетплейс.

##Каталог в формате XML

Каталог обязательно должен иметь XML-заголовок, который начинается с первой строки, с нулевого элемента, в заголовке присутствуют атрибуты версии и используемая кодировка. Допустимые кодировки: UTF-8 или windows-1251. Пример заголовка:

За основу предложенной структуры XML-каталога использован формат выгрузки от [Яндекс.Маркет](https://yandex.ru/support/partnermarket/export/vendor-model.html), соответственно, если уже существует синхронизация с платформой Яндекс, достаточно внести незначительные дополнения, чтобы целевую выгрузку можно было задействовать для платформы Marketplace (минимально достаточно добавить атрибут credit в параметр offer, чтобы обозначить товары, которые планируется продавать в рассрочку)


##Информация о наличии товаров

 Базовый сценарий предполагает, что товар может поступить в любую точку самовывоза в рамках региона за указанный в delivery-options срок.

Если товар есть не во всех точках самовывоза или существует техническое ограничение на перевозку товаров из одного пункта в другой, предусмотрен формат указания списка точек самовывоза для отдельно взятого товара, для этого необходимо использовать параметр points и перечислить в нем точки самовывоза:
 
Список точек самовывоза партнер загружает через Личный кабинет, данный процесс описан в разделе [Предоставление информации о точках самовывоза](#19530bd8b7)





##Процесс загрузки каталога

Подготовленный каталог необходимо указать в настройках аккаунта, которые задаются в Личном кабинете. Для каждого региона необходимо указать свой URL до целевого каталога. В случае, если партнер присутствует во всех регионах и имеет единый товарный каталог, необходимо выбрать “Все регионы” (необходимо предварительное согласование менеджера).

![](image_catalogue.jpeg)


#Предоставление информации о точках самовывоза

Точки самовывоза передаются в виде CSV-таблицы с указанием адреса и режима работы. Необходимо использовать разделитель столбцов "," (запятая).

Загрузка и актуализация списка происходит через Личный кабинет. Если для какого-то регионов не указаны точки самовывоза, Покупателю будет предложен вариант доставки курьером.

При возможности разместить CSV на внешнем источнике, можно указать URL до целевого файла.
![](image_selfservice.jpeg)

##Описание параметров CSV с точками самовывоза
| Параметр                    | Описание                                                                                                                                                                            |
|-----------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `Id`<br> string             | Идентификатор точки самовывоза.                                                                                                                                                     |
| `TradingPoint`<br> integer  | Код торговой точки, соответствующий данному пункту самовывоза. Код кредитного продукта можно уточнить у менеджера, ответственного за работу с банком.                               |
| `RegionCode`<br> integer    | Идентификатор региона. Значение берется из списка регионов, в которых работает маркетплейс. Список регионов будет предоставлен со стороны Marketplace.                              |
| `RegionName`<br> string     | Название региона согласно списку. Значение берется из списка регионов, в которых работает маркетплейс. Список регионов будет предоставлен со стороны Marketplace.                   |
| `Address`<br> string        | Адрес точки самовывоза (произвольное описание).                                                                                                                                     |
| `workingDays`<br> string    | Режим работы в будние дни, формат XX:XX-XX:XX, например 11:00-20:00                                                                                                                 |
| `Saturday`<br> string       | Режим работы в субботу, формат XX:XX-XX:XX, например 11:00-20:00. Если поле остается пустым, берется значение из workingDays, если указано false —в субботу пункт не работает.      |
| `Sunday`<br>  string             | Режим работы в воскресенье, формат XX:XX-XX:XX, например 11:00-20:00. Если поле остается пустым, берется значение из Saturday, если указано false —в воскресенье пункт не работает. |
#Процесс покупки товара

##Покупка товара с доставкой курьером
Данный сценарий предполагает, что Покупатель подписывает договор без участия партнера, после чего инициируется процесс доставки.
![](image_delivery_curier.jpeg)
##Покупка товара с последующим самовывозом
Данный сценарий предполагает, что в точке самовывоза партнера присутствует кредитный специалист, который имеет доступ в систему Банка и полностью сопровождает процесс подписания договора с Покупателем.
![](image_delivery_self.jpeg)

##Проверка наличия товара у партнера
В момент когда Покупатель выбрал предложение, партнеру поступает запрос на проверку наличия данного товара в регионе. В ответ партнер должен уведомить о возможности зарезервировать товар, а также прислать условия доставки и самовывоза. Расчет параметров получения товара клиентом должен производиться на основе доступных товаров. (Например, если доступно только 3 из 5 переданных в запросе товаров, стоимость доставки должна быть только для этих трех товаров).



> Пример запроса POST /order/check:

```shell
curl -X POST https://example.com/order/check \
  -H 'Content-Type: application/json' \
  -H 'cache-control: no-cache' \
  -d '{"offersRequest":[
{"offerId":"123",
"quantity":1,
"regionId":77,
"productCode":"0-0-6"}
]}'
```
### HTTP запрос

`POST /order/check`



### Входные параметры



| Параметр                                     | Обязательность | Описание                                                                           |
|----------------------------------------------|----------------|------------------------------------------------------------------------------------|
| `offersRequest`<br>  Array of [{offerRequest}](#offerrequest) | Обязательно    | Массив объектов с запросами на проверку наличия товаров, которые выбрал Покупатель. |

### объект offerRequest

| Параметр                  | Обязательность | Описание                                                                                                             |
|---------------------------|----------------|----------------------------------------------------------------------------------------------------------------------|
| `offerId` <br> integer    | Обязательно    | Идентификатор товара из YML-каталога.                                                                                |
| `quantity`<br>integer     | Обязательно    | Количество единиц товара для бронирования.                                                                           |
| `regionId` <br>integer    | Обязательно    | Идентификатор региона                                                                                                |
| `productCode`<br> string | Обязательно    | Код кредитного продукта.<br> Примеры:<br>0-0-3<br>0-0-6<br>0-0-10<br>0-0-12<br>0-0-18<br>0-0-24<br>0-0-36<br> |
| `orderId`<br> string      | Необязательно  | Идентификатор заказа, сгенерированный на стороне маркетплейса |

> Пример ответа в JSON:

```json
{
    "offersResponse": [
        {
            "status": "available",
            "offerId": "123",
            "quantity": 1,
            "points": [
                "0"
            ]
        }
    ],
    "DeliveryOptions": {
        "delivery": [
            {
                "DeliveryID": 1,
                "DeliveryName": "Доставка СДЭК(склад-склад)",
                "Cost": 1000,
                "Days": "1-2"
            }
        ]
    }
}
```


### Ответ HTTP 200 OK

| Параметр | Обязательность | Описание |
|-------------------------------------------|----------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|
| offersResponse Array of [{offerResponse}](#offerresponse)| Обязательно | Массив объектов со статусом резерва по каждому из запрошенных товаров. |
| DeliveryOptions [{DeliveryOption}](#deliveryoption)| Обязательно | Дополнительная информация по параметрам доставки, которую сможет выбирать Покупатель. Партнер должен представить варианты доставки для всей группы товаров. |




### объект offerResponse
| Параметр | Обязательность | Описание |
|------------------------------|----------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `offerId`<br>integer | Обязательно | Идентификатор товара из YML-каталога. |
| `status`<br>string | Обязательно | Варианты:<br>‘available’ — товар доступен;<br>‘unavailable’ — товар недоступен. |
| `points`<br> Array of string | Обязательно | Идентификаторы пунктов самовывоза, в которых доступен товар.<br>Также необходимо добавлять в список 0, если доступна доставка курьером. Пустой массив - товар недоступен. |
| `reason`<br>string | Необязательно | Указывается, если товар недоступен (пример: “not in stock”). |


### объект DeliveryOption



### Ошибка



## Резервирование товара

<aside class="notice">
Базовый сценарий предполагает два этапа резервирования:
</aside>


### HTTP запрос

`POST /order/:orderId/prereserve`
<aside class="success">
Предрезервирование — или, так называемое, "краткосрочное" резервирование — Покупатель выбрал товар и приступил к заполнению формы, партнер на вызов данного метода бронирует товар для заданного orderId, который будет использоваться при втором этапе резервирования, метод которого будет вызвано следом. партнер сам определяет время короткого резерва, но значение должно быть не меньше 30 минут
</aside>

`POST /order/:orderId/reserve`
<aside class="success">
Резервирование — после того, как Покупатель заполнил заявку, выбрал способ доставки, партнеру приходит запрос на резервирование товара до момента подписания кредитного договора клиентом.
</aside>

### Входные параметры
| Параметр | Обязательность | Описание |
|---------------------------------|----------------|--------------------------------------------------------------------------------------|
| `orderId`<br>  string | Обязательно | Идентификатор заказа, сгенерированный на стороне маркетплейса. |
| `offerIds`<br> Array of [{offer}](#offer)| Обязательно | Массив объектов с идентификаторами товаров и их количество. |
| `regionId`<br> integer | Обязательно | Идентификатор региона из списка. |
| `pointId`<br>string | Обязательно | Идентификатор точки самовывоза из CSV, 0 - если выбрана доставка курьером. |
| `deliveryId`<br>integer  | Необязательно | Идентификатор службы доставки в системе партнера. |
| `productCode`<br>string  | Обязательно | Код кредитного продукта.<br> Примеры:<br>0-0-3<br>0-0-6<br>0-0-10<br>0-0-12<br>0-0-18<br>0-0-24<br>0-0-36 |
| `address`<br> [{address}](#address)| Необязательно | Адрес в формате КЛАДР, указывается, если выбрана доставка курьером. |
| `client`<br> [{clientInfo}](#clientInfo)| Обязательно(для метода reserve) | Информация о клиенте. |
                           
### объект offer
 
### объект address

### объект clientInfo
 
 
